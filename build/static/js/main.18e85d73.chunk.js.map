{"version":3,"sources":["services/personService.js","App.js","index.js"],"names":["baseUrl","Notification","message","isErrorMessage","className","Filter","searchTerm","handleChangeSearchTerm","onSubmit","event","preventDefault","value","onChange","Person","person","handleDelete","name","number","onClick","Persons","persons","filteredPersons","filter","toLowerCase","includes","trim","map","key","id","PersonForm","handleSubmit","handleChangeSetName","handleChangeSetNumber","type","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setSearchTerm","isError","notification","setNotification","useEffect","axios","get","then","response","data","createNotification","setTimeout","createNewPerson","trimName","trimNumber","newObject","post","catch","error","errorMessage","console","log","clearForm","updatePerson","existingPerson","window","confirm","put","alreadyExists","find","target","length","deletePerson","personId","delete","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.18e85d73.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = newObject => {\r\n  const request = axios.put(`${baseUrl}/${newObject.id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst remove = personId => {\r\n  const request = axios.delete(`${baseUrl}/${personId}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport { getAll, create, update, remove }","import React, { useState, useEffect } from 'react'\r\nimport {\r\n  getAll,\r\n  create,\r\n  update,\r\n  remove,\r\n} from './services/personService'\r\n\r\nconst Notification = ({ message, isErrorMessage }) => {\r\n  if (!message) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <h4 className={isErrorMessage ? 'notification error' : 'notification success'}>\r\n      {message}\r\n    </h4>\r\n  )\r\n}\r\n\r\nconst Filter = ({ searchTerm, handleChangeSearchTerm }) => (\r\n  <form onSubmit={event => event.preventDefault()}>\r\n    <div>\r\n      Filter shown with\r\n      <input\r\n        value={searchTerm}\r\n        onChange={handleChangeSearchTerm}\r\n      />\r\n    </div>\r\n  </form>\r\n)\r\n\r\nconst Person = ({ person, handleDelete }) => (\r\n  <div>\r\n    {`${person.name} ${person.number}`}\r\n    <button\r\n      onClick={() => handleDelete(person)}\r\n    >\r\n      {'delete'}\r\n    </button>\r\n  </div>\r\n)\r\n\r\nconst Persons = ({ persons, searchTerm, handleDelete }) => {\r\n  const filteredPersons = persons.filter(person =>\r\n    person\r\n    .name\r\n    .toLowerCase()\r\n    .includes(searchTerm.trim().toLowerCase())\r\n  )\r\n\r\n  return (\r\n    <div>\r\n      {filteredPersons.map(person =>\r\n        <Person\r\n          key={person.id}\r\n          person={person}\r\n          handleDelete={handleDelete}\r\n        />\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst PersonForm = ({\r\n  name,\r\n  number,\r\n  handleSubmit,\r\n  handleChangeSetName,\r\n  handleChangeSetNumber,\r\n}) => (\r\n  <form onSubmit={handleSubmit}>\r\n    <div>\r\n      name:\r\n      <input\r\n        value={name}\r\n        onChange={handleChangeSetName}\r\n      />\r\n    </div>\r\n    <div>\r\n      number:\r\n      <input\r\n        value={number}\r\n        onChange={handleChangeSetNumber}\r\n      />\r\n    </div>\r\n    <div>\r\n      <button type=\"submit\">add</button>\r\n    </div>\r\n  </form>\r\n)\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons ] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ searchTerm, setSearchTerm ] = useState('')\r\n  const [ notification, setNotification ] = useState({\r\n    message: null,\r\n    isError: false,\r\n  })\r\n\r\n  useEffect(() => {\r\n    getAll()\r\n      .then(data => {\r\n        setPersons(data)\r\n      })\r\n  }, [])\r\n\r\n  const createNotification = (message, isError) => {\r\n    setNotification({\r\n      message,\r\n      isError,\r\n    })\r\n\r\n    setTimeout(() => {\r\n      setNotification({\r\n        message: null,\r\n        isError: false,\r\n      })\r\n    }, 5000)\r\n  }\r\n\r\n  const createNewPerson = (trimName, trimNumber) => {\r\n    create({\r\n      name: trimName,\r\n      number: trimNumber,\r\n    })\r\n    .then(data => {\r\n      setPersons([\r\n        ...persons,\r\n        data,\r\n      ])\r\n\r\n      createNotification(`Added ${data.name}`)\r\n    })\r\n    .catch((error) => {\r\n      const errorMessage = error.response.data.error\r\n      createNotification(errorMessage, true)\r\n      console.log(errorMessage)\r\n    })\r\n\r\n    clearForm()\r\n  }\r\n\r\n  const updatePerson = (trimName, trimNumber, existingPerson) => {\r\n    if(window.confirm(`${trimName} is already added to phonebook, replace the old number with a new one?`)) {\r\n      update({\r\n        ...existingPerson,\r\n        number: trimNumber\r\n      })\r\n      .then(data => {\r\n        setPersons(\r\n          persons.map(person => {\r\n            if (person.id === data.id) {\r\n              return data\r\n            }\r\n            return person\r\n          })\r\n        )\r\n      })\r\n      .catch(error => {\r\n        const errorMessage = error.response.data.error;\r\n        console.log(errorMessage)\r\n        createNotification(\r\n          errorMessage,\r\n          true\r\n        )\r\n      })\r\n\r\n      clearForm()\r\n    }\r\n  }\r\n\r\n  const clearForm = () => {\r\n    setNewName('')\r\n    setNewNumber('')\r\n  }\r\n\r\n  const handleSubmit = event => {\r\n    event.preventDefault()\r\n    const trimName = newName.trim()\r\n    const trimNumber = newNumber.trim()\r\n    const existingPerson = alreadyExists(trimName)\r\n\r\n    // check if the name and the number are valid \r\n    if (trimName < 1 || trimNumber.length < 1) {\r\n      createNotification(`Please input valid name and phone number`, true)\r\n    }\r\n\r\n    // Create a new person in the database\r\n    // if the person doesnot exist already\r\n    if (!existingPerson && trimNumber.length) {\r\n      createNewPerson(trimName, trimNumber)\r\n    }\r\n\r\n    // Update the person's phone number in the database\r\n    // if the person exists already\r\n    if (existingPerson && trimNumber.length){\r\n      updatePerson(trimName, trimNumber, existingPerson)\r\n    }\r\n  }\r\n\r\n  const handleDelete = deletePerson => {\r\n    if(window.confirm(`Delete ${deletePerson.name}`)) {\r\n      remove(deletePerson.id)\r\n        .then(data => {\r\n          createNotification(\r\n            `Deleted ${deletePerson.name} from the server`,\r\n            false\r\n          )\r\n          setPersons(persons.filter(person => person.id !== deletePerson.id))\r\n        })\r\n        .catch(error => {\r\n          createNotification(\r\n            `Information of ${deletePerson.name} has already been removed from server`,\r\n            true\r\n          )\r\n          setPersons(persons.filter(person => person.id !== deletePerson.id))\r\n        })\r\n    }\r\n  }\r\n\r\n  const alreadyExists = name => {\r\n    const person = persons.find(person => person.name === name)\r\n    return person\r\n  }\r\n\r\n  const handleChangeSearchTerm = event => {\r\n    setSearchTerm(event.target.value)\r\n  }\r\n\r\n  const handleChangeSetName = event => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleChangeSetNumber = event => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification\r\n        message={notification.message}\r\n        isErrorMessage={notification.isError}\r\n      />\r\n      <Filter searchTerm={searchTerm} handleChangeSearchTerm={handleChangeSearchTerm} />\r\n  \r\n      <h3>Add a new</h3>\r\n      <PersonForm\r\n        name={newName}\r\n        number={newNumber}\r\n        handleSubmit={handleSubmit}\r\n        handleChangeSetName={handleChangeSetName}\r\n        handleChangeSetNumber={handleChangeSetNumber}\r\n      />\r\n\r\n      <h3>Numbers</h3>\r\n      <Persons\r\n        persons={persons}\r\n        searchTerm={searchTerm}\r\n        handleDelete={handleDelete}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}